
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <title>Add Customers | Cashsnap</title>
      
      <!-- Favicon -->
      <link rel="shortcut icon" href="/assets/images/favicon.ico" />
      <link rel="stylesheet" href="/assets/css/backend-plugin.min.css">
      <link rel="stylesheet" href="/assets/css/backend.css?v=1.0.0">
      <link rel="stylesheet" href="/assets/vendor/@fortawesome/fontawesome-free/css/all.min.css">
      <link rel="stylesheet" href="/assets/vendor/line-awesome/dist/line-awesome/css/line-awesome.min.css">
      <link rel="stylesheet" href="/assets/vendor/remixicon/fonts/remixicon.css">  </head>
      <body class="  ">
    <!-- loader Start -->
    <div id="loading">
        <div id="loading-center">
        </div>
    </div>
    <!-- Wrapper Start -->
    <div class="wrapper">
        <div class="iq-sidebar  sidebar-default ">
            <div class="iq-sidebar-logo d-flex align-items-center justify-content-between">
                <a href="/dashboard.html" class="header-logo">
                    <img src="/assets/images/logo.png" class="img-fluid rounded-normal light-logo" alt="logo">
                    <h5 class="logo-title light-logo ml-3">Cashsnap</h5>
                </a>
                <div class="iq-menu-bt-sidebar ml-0">
                    <i class="las la-bars wrapper-menu"></i>
                </div>
            </div>
            <div class="data-scrollbar" data-scroll="1">
                <nav class="iq-sidebar-menu">
                    <ul id="iq-sidebar-toggle" class="iq-menu">
                        <li class="">
                            <a href="/dashboard.html" class="svg-icon">
                                <svg class="svg-icon" id="p-dash1" width="20" height="20"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                                    </path>
                                    <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                    <line x1="12" y1="22.08" x2="12" y2="12"></line>
                                </svg>
                                <span class="ml-4">Dashboard</span>
                            </a>
                        </li>
                        <li class="">
                            <a href="/calculator.html">
                                <svg class="svg-icon" id="p-dash18" width="20" height="20"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M21 12C21 16.714 21 19.0711 19.682 20.5355C18.364 22 16.2426 22 12 22C7.75736 22 5.63604 22 4.31802 20.5355C3 19.0711 3 16.714 3 12C3 7.28595 3 4.92893 4.31802 3.46447C5.63604 2 7.75736 2 12 2C16.2426 2 18.364 2 19.682 3.46447C20.5583 4.43821 20.852 5.80655 20.9504 8" />
                                    <path
                                        d="M7 8C7 7.53501 7 7.30252 7.05111 7.11177C7.18981 6.59413 7.59413 6.18981 8.11177 6.05111C8.30252 6 8.53501 6 9 6H15C15.465 6 15.6975 6 15.8882 6.05111C16.4059 6.18981 16.8102 6.59413 16.9489 7.11177C17 7.30252 17 7.53501 17 8C17 8.46499 17 8.69748 16.9489 8.88823C16.8102 9.40587 16.4059 9.81019 15.8882 9.94889C15.6975 10 15.465 10 15 10H9C8.53501 10 8.30252 10 8.11177 9.94889C7.59413 9.81019 7.18981 9.40587 7.05111 8.88823C7 8.69748 7 8.46499 7 8Z" />
                                    <circle cx="8" cy="13" r="1" fill="#1C274D" />
                                    <circle cx="8" cy="17" r="1" fill="#1C274D" />
                                    <circle cx="12" cy="13" r="1" fill="#1C274D" />
                                    <circle cx="12" cy="17" r="1" fill="#1C274D" />
                                    <circle cx="16" cy="13" r="1" fill="#1C274D" />
                                    <circle cx="16" cy="17" r="1" fill="#1C274D" />
                                </svg>
                                <polyline points="13 2 13 9 20 9"></polyline>
                                </svg>
                                <span class="ml-4">Calculator</span>
                            </a>
                        </li>
                        
                        <li class="">
                            <a href="#product" class="collapsed" data-toggle="collapse" aria-expanded="false">
                                <svg class="svg-icon" id="p-dash2" width="20" height="20"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <circle cx="9" cy="21" r="1"></circle>
                                    <circle cx="20" cy="21" r="1"></circle>
                                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                                </svg>
                                <span class="ml-4">Products</span>
                                <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="10 15 15 20 20 15"></polyline>
                                    <path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                                </svg>
                            </a>
                            <ul id="product" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                                <li class="">
                                    <a href="/page-list-product.html">
                                        <i class="las la-minus"></i><span>List Product</span>
                                    </a>
                                </li>
                                <li class="">
                                    <a href="/page-add-product.html">
                                        <i class="las la-minus"></i><span>Add Product</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        
                        <li class=" ">
                            <a href="#return" class="collapsed" data-toggle="collapse" aria-expanded="false">
                                <svg class="svg-icon" id="p-dash6" width="20" height="20"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="4 14 10 14 10 20"></polyline>
                                    <polyline points="20 10 14 10 14 4"></polyline>
                                    <line x1="14" y1="10" x2="21" y2="3"></line>
                                    <line x1="3" y1="21" x2="10" y2="14"></line>
                                </svg>
                                <span class="ml-4">Returns</span>
                                <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="10 15 15 20 20 15"></polyline>
                                    <path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                                </svg>
                            </a>
                            <ul id="return" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                                <li class="">
                                    <a href="/page-list-returns.html">
                                        <i class="las la-minus"></i><span>List Returns</span>
                                    </a>
                                </li>
                                <li class="">
                                    <a href="/page-add-return.html">
                                        <i class="las la-minus"></i><span>Add Return</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="active">
                            <a href="#people" class="collapsed" data-toggle="collapse" aria-expanded="false">
                                <svg class="svg-icon" id="p-dash8" width="20" height="20"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="9" cy="7" r="4"></circle>
                                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                </svg>
                                <span class="ml-4">People</span>
                                <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="10 15 15 20 20 15"></polyline>
                                    <path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                                </svg>
                            </a>
                            <ul id="people" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                                <li class="">
                                    <a href="/page-list-customers.html">
                                        <i class="las la-minus"></i><span>Customers</span>
                                    </a>
                                </li>
                                <li class="active">
                                    <a href="/page-add-customers.html">
                                        <i class="las la-minus"></i><span>Add Customers</span>
                                    </a>
                                </li>
                                <li class="">
                                    <a href="/page-list-employee.html">
                                        <i class="las la-minus"></i><span>Employee</span>
                                    </a>
                                </li>
                                <li class="">
                                    <a href="/page-add-employee.html">
                                        <i class="las la-minus"></i><span>Add Employee</span>
                                    </a>
                                </li>
                                <li class="">
                                    <a href="/page-list-suppliers.html">
                                        <i class="las la-minus"></i><span>Suppliers</span>
                                    </a>
                                </li>
                                <li class="">
                                    <a href="/page-add-supplier.html">
                                        <i class="las la-minus"></i><span>Add Suppliers</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        
                        <div class="p-3"></div>
                    </ul>   
                </nav>  
            </div>
        </div>
        <div class="iq-top-navbar">
            <div class="iq-navbar-custom">
              <nav class="navbar navbar-expand-lg navbar-light p-0">
                  <div class="iq-navbar-logo d-flex align-items-center justify-content-between">
                      <i class="ri-menu-line wrapper-menu"></i>
                      <a href="/dashboard.html" class="header-logo">
                          <img src="/assets/images/logo.png" class="img-fluid rounded-normal" alt="logo">
                          <h5 class="logo-title ml-3">Cashsnap</h5>
                      </a>
                  </div>
                  <div class="iq-search-bar device-search">
                      <form action="#" class="searchbox">
                          <a class="search-link" href="#"><i class="ri-search-line"></i></a>
                          <input type="text" class="text search-input" placeholder="Search here.">
                      </form>
                  </div>
                  <div class="d-flex align-items-center">
                      <button class="navbar-toggler" type="button" data-toggle="collapse"
                          data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                          aria-label="Toggle navigation">
                          <i class="ri-menu-3-line"></i>
                      </button>
                      <div class="collapse navbar-collapse" id="navbarSupportedContent">
                          <ul class="navbar-nav ml-auto navbar-list align-items-center">
                              <li class="nav-item nav-icon dropdown caption-content">
                                  <a href="#" class="search-toggle dropdown-toggle" id="dropdownMenuButton4"
                                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                      <img src="/assets/images/user/1.png" class="img-fluid rounded" alt="user">
                                  </a>
                                  <div class="iq-sub-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
                                      <div class="card shadow-none m-0">
                                          <div class="card-body p-0 text-center">
                                              <div class="media-body profile-detail text-center">
                                                  <img src="/assets/images/page-img/profile-bg.jpg" alt="profile-bg"
                                                      class="rounded-top img-fluid mb-4">
                                                  <img src="/assets/images/user/1.png" alt="profile-img"
                                                      class="rounded profile-img img-fluid avatar-70">
                                              </div>
                                              <div class="p-3">
                                                <h5 id="msgmail" class="mb-1">JoanDuo@property.com</h5>
                                                  <!-- <p class="mb-0">Since 10 march, 2020</p> -->
                                                  <div class="d-flex align-items-center justify-content-center mt-3">
                                                      <a href="" class="btn border mr-2">Profile</a>
                                                      <a id="SignOutbtn" href="auth-sign-in-up.html" class="btn border">Sign Out</a>
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                              </li>
                          </ul>
                      </div>
                  </div>
              </nav>
          </div>
      </div>
        <div class="content-page">
            <div class="container-fluid add-form-list">
               <div class="row">
                   <div class="col-sm-12">
                       <div class="card">
                           <div class="card-header d-flex justify-content-between">
                               <div class="header-title">
                                   <h4 class="card-title">Add Customer</h4>
                               </div>
                           </div>
                           <div class="card-body">
                               <form id="customerForm">
                                   <div class="row"> 
                                       <div class="col-md-6">                      
                                           <div class="form-group">
                                               <label for="name">Name *</label>
                                               <input type="text" id="name" name="name" class="form-control" placeholder="Enter Name" required>
                                               <div class="help-block with-errors"></div>
                                           </div>
                                       </div>    
                                       <div class="col-md-6">
                                           <div class="form-group">
                                               <label for="email">Email *</label>
                                               <input type="email" id="email" name="email" class="form-control" placeholder="Enter Email" required>
                                               <div class="help-block with-errors"></div>
                                           </div>
                                       </div> 
                                       <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="phonenumber">Phone Number *</label>
                                            <input type="text" id="phonenumber" name="phonenumber" class="form-control" placeholder="Enter Phone Number" pattern="^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[6789]\d{9}$" required>
                                            <div class="help-block with-errors"></div>
                                        </div>                                        
                                       </div> 
                                       <div class="col-md-6">
                                           <div class="form-group">
                                               <label for="country">Country *</label>
                                               <input type="text" id="country" name="country" class="form-control" placeholder="Enter Country" required>
                                               <div class="help-block with-errors"></div>
                                           </div>
                                       </div>
                                       <div class="col-md-12">
                                           <div class="form-group">
                                               <label for="address">Address</label>
                                               <textarea type="text" id="address" name="address" class="form-control" rows="4"></textarea>
                                           </div>
                                       </div>
                                       <div class="col-md-12">
                                           <div class="form-group">
                                               <label for="city">City *</label>
                                               <input type="text" id="city" name="city" class="form-control" placeholder="Enter City" required>
                                               <div class="help-block with-errors"></div>
                                           </div>
                                       </div> 
                                       <div class="col-md-12">
                                           <div class="form-group">
                                               <label for="state">State *</label>
                                               <input type="text" id="state" name="state" class="form-control" placeholder="Enter State" required>
                                               <div class="help-block with-errors"></div>
                                           </div>
                                       </div>
                                       <div class="col-md-12">
                                            <div class="form-group">
                                                <label for="status">Status *</label>
                                                <select id="status" name="status" class="selectpicker form-control" data-style="py-0">
                                                    <option value="active">Active</option>
                                                    <option value="inactive">Inactive</option>
                                                </select>
                                            </div>
                                        </div>
                                   </div>                            
                                   <button type="submit" class="btn btn-primary mr-2">Add Customer</button>
                                   <button type="reset" class="btn btn-danger">Reset</button>
                               </form>
                           </div>
                       </div>
                   </div>
               </div>
               <!-- Page end  -->
           </div>
             </div>
           </div>
           <!-- Wrapper End-->
           <footer class="iq-footer">
                   <div class="container-fluid">
                   <div class="card">
                       <div class="card-body">
                           <div class="row">
                               <div class="col-lg-6">
                                   <ul class="list-inline mb-0">
                                       <li class="list-inline-item"><a href="/privacy-policy.html">Privacy Policy</a></li>
                                       <li class="list-inline-item"><a href="/terms-of-service.html">Terms of Use</a></li>
                                   </ul>
                               </div>
                               <div class="col-lg-6 text-right">
                                   <span class="mr-1"><script>document.write(new Date().getFullYear())</script>Â©</span> <a href="#" class="">Cashsnap</a>.
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
           </footer>
           <script type="module">
               // Firebase initialization
               import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
               import { getFirestore, doc, setDoc, collection, addDoc, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
               import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
       
               const firebaseConfig = {
                   apiKey: "AIzaSyBncdnP33SF5gVSACcn2DI7DMZ-eIF3hj4",
                   authDomain: "cashsnap-9a185.firebaseapp.com",
                   projectId: "cashsnap-9a185",
                   storageBucket: "cashsnap-9a185.appspot.com",
                   messagingSenderId: "1046320871049",
                   appId: "1:1046320871049:web:600b3dee8af7b3c4763858",
                   measurementId: "G-5M366WH052"
               };
               const app = initializeApp(firebaseConfig);
               const db = getFirestore(app);
               const auth = getAuth(app);
       
               let currentUser = null;
       
               onAuthStateChanged(auth, (user) => {
                   if (user) {
                       currentUser = user;
                   } else {
                       alert("Please sign in to add customers.");
                   }
               });
       
               async function addcustomer(name, email, phonenumber, country, address, city, state, status) {
                   if (!currentUser) {
                       alert("Please sign in to add customers.");
                       return;
                   }
       
                   try {
                       // Check if the code is unique
                       const customerQuerySnapshot = await getDocs(query(collection(db, "Data", currentUser.uid, "customer"), where("phonenumber", "==", phonenumber)));
                       if (!customerQuerySnapshot.empty) {
                           alert("Customer with the same Phone Number already exists.");
                           return;
                       }
       
                       const userDocRef = doc(db, "Data", currentUser.uid);
                       const customersRef = collection(userDocRef, "customers");
                       const customersId = phonenumber; // Use phonenumber as customersId
                       await setDoc(doc(customersRef, customersId), {
                           Date: new Date().toLocaleDateString(),
                           Time: new Date().toLocaleTimeString(),
                           Name: name,
                           Email: email,
                           Phoneno: phonenumber,
                           Country: country,
                           Address: address,
                           City: city,
                           State: state,
                           Status: status
                       });
                       alert("Customer added successfully with Phone number: " + phonenumber);
                   } catch (error) {
                       console.error("Error adding product:", error);
                       alert("Failed to add product. Please try again.");
                   }
               }
       
               const customerForm = document.getElementById("customerForm");
               customerForm.addEventListener('submit', async (event) => {
                   event.preventDefault();
                   const nameInput = document.getElementById("name");
                   const emailInput = document.getElementById("email");
                   const phonenumberInput = document.getElementById("phonenumber");
                   const countryInput = document.getElementById("country");
                   const addressInput = document.getElementById("address");
                   const cityInput = document.getElementById("city");
                   const stateInput = document.getElementById("state");
                   const statusInput = document.getElementById("status");
       
                   await addcustomer(
                       nameInput.value, 
                       emailInput.value, 
                       phonenumberInput.value, 
                       countryInput.value, 
                       addressInput.value, 
                       cityInput.value, 
                       stateInput.value,
                       statusInput.value
                   );
               });
           </script>
           <script src="/assets/js/login.js"></script>
           <script src="/assets/js/firebaseconfig.js"></script>
           <script src="/assets/js/dashboard.js"></script>
           <script src="/assets/js/backend-bundle.min.js"></script>
           <script src="/assets/js/table-treeview.js"></script>
           <script src="/assets/js/customizer.js"></script>
           <script async src="/assets/js/chart-custom.js"></script>
           <script src="/assets/js/app.js"></script>
    </body>
</html>